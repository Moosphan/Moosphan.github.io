---
layout:     post
title: "å…³äºåšå®¢æ›´æ¢è¯„è®ºç³»ç»Ÿçš„ä¸€åœºå®æ€"
visible: false
date: 2022-07-16 20:36:12
author:     "Dorck"
catalog: false
header-style: text
tags: 
- è¯„è®ºç³»ç»Ÿ
- Jekyll
- Gitalk
- Giscus
categories:
- other
---

ä»å»å¹´å»ºç«™ ***dorck.cn*** å¼€å§‹åˆ°ç°åœ¨ï¼Œæˆ‘å·²ç»é™†ç»­æ›´æ¢è¿‡ä¸‰å››æ¬¡è¯„è®ºç³»ç»Ÿäº†ï¼Œä»¥è‡³äºæœ€è¿‘åŠå¹´ç”šè‡³éƒ½æœªå¼€å¯è¿™ä¸ªåŠŸèƒ½ï¼Œåªå› ä¸ºå®ƒä»¬å¤ªä¸ç¨³å®šæˆ–è€…ä½“éªŒå¤ªå·®ã€‚æœ‰ä¸€é˜µå­æ²¡æ›´æ–°åšå®¢äº†ï¼Œé‡æ‹¾èµ·æ¥ä¸€æ®µæ—¶é—´ä¹‹åå‘ç°è¯„è®ºåŠŸèƒ½è¿˜æ˜¯è¦æœ‰çš„ï¼Œæ¯•ç«Ÿè¦å®¢è§‚äº†è§£åˆ°ä»–äººå¯¹äºæ–‡ç« å†…å®¹è´¨é‡çš„çœ‹æ³•ï¼Œæ²Ÿé€šçš„å¹³å°å°‘ä¸äº†çš„ï¼Œæ›´é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼šä»¥åé‡åˆ°ç›¸å…³çŸ¥è¯†ç‚¹è¿˜èƒ½åº”æ€¥æ€§åœ°è‡ªæˆ‘è¯„è®ºï¼Œè¡¥å……ä¸€äºŒæ€è·¯ã€‚

ä»æœ€åˆçš„ **ç•…è¨€** åˆ° **Valine** å†åˆ° **Disqus**ï¼Œå®ƒä»¬éƒ½æ‰¾åˆ°äº†è‡ªå·±çš„é€‚ä¼—ï¼Œå´å”¯ç‹¬ç•™ä¸ä¸‹æˆ‘ã€‚ç•…è¨€æ˜¯å›½äººç»´æŠ¤çš„ï¼Œç»å¸¸æ–­æ‰ä¸å¤Ÿç¨³å®šï¼›è€Œ valine éœ€è¦ç»‘å®š LeanCloudï¼Œè¿˜è¦å¡«ä¸€å¤§å †å¤‡æ¡ˆä¿¡æ¯ç­‰ï¼Œéº»çƒ¦è‡³æï¼Œå¹¶ä¸”å…è´¹ç‰ˆçš„é¢åº¦æœ‰é™ï¼Œéª¨é² åœ¨å–‰ï¼›Disqus æˆ‘å‘ç°ä¹Ÿä¸ç¨³å®šï¼Œå¯èƒ½æ˜¯å› ä¸ºå›½å¤–å¹³å°çš„åŸå› ï¼Œéœ€è¦æ¢¯å­ã€‚ç´¢æ€§è¿™äº›æˆ‘éƒ½æ”¾å¼ƒäº†ï¼Œäºæ˜¯æˆ‘ç­‰æ¥äº† **Gitalk** å’Œ **Giscus**ï¼Œè™½ç„¶è¿Ÿäº†ä¸€äº›ï¼Œä½†å´æ˜¯æˆ‘æƒ³è¦çš„ï¼Œå› ä¸ºå®ƒä»¬æœ¬å°±ç¦»æˆ‘å¾ˆè¿‘ã€‚å®ƒä»¬éƒ½æ˜¯åŸºäº Github è¿™ä¸ªä¸–ç•Œç¬¬ä¸€å¼€æºç¤¾åŒºè¡ç”Ÿå‡ºæ¥çš„å°äº§å“ï¼ŒGitalk åŸºäºä»“åº“çš„ issue ç³»ç»Ÿï¼Œè€Œ Giscus åŸºäº Github åˆšæ¨å‡ºä¸ä¹…çš„ Discussion åŠŸèƒ½ï¼Œæ”¯æŒæ¥¼ä¸­æ¥¼å›å¤ï¼Œä»ä½“éªŒä¸Šæ¥è¯´ï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº†åè€…ã€‚

ç”±äºæˆ‘æ˜¯åŸºäº Jekyll æ¥å»ºç«™çš„ï¼Œæ‰€ä»¥ä¸‹é¢å°±åŸºäº Jekyll æ¥è®°å½•ä¸‹å¦‚ä½•åˆ†åˆ«é…ç½® Gitalk å’Œ Giscus è¯„è®ºç³»ç»Ÿã€‚

### Gitalk é…ç½®

é¦–å…ˆåœ¨ `_includes/` ç›®å½•ä¸‹åˆ›å»º `gitalk_comment.html` æ–‡ä»¶ï¼Œæ‹·è´å†…å®¹å¦‚ä¸‹ï¼š

```html
<div id="gitalk-container"></div>
 <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
 <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
 <script>
 var gitalk = new Gitalk({
     id: location.pathname,
     clientID: "{{ site.comments.clientID }}",
     clientSecret: "{{ site.comments.clientSecret }}",
     repo: "{{ site.comments.repo }}",
     owner: "{{ site.comments.owner }}",
     admin: "{{ site.comments.admin }}", 
     labels: ['Gitalk'],
 })
 gitalk.render('gitalk-container')
 </script>
```

ç„¶ååœ¨ `_layouts/post.html` ä¸­åŠ å…¥å¤´æ–‡ä»¶å£°æ˜å¹¶åœ¨è¯„è®ºåŒºè®¾ç½®çš„ Div ä¸­è¿½åŠ å¦‚ä¸‹å†…å®¹ï¼š

```html
<!--//æ·»åŠ GitTalkè¯„è®ºç³»ç»Ÿ-->
 <link rel="stylesheet" href="/css/gittalk.css">
 <script src="/js/gittalk.min.js"></script>

<!-- .... -->

<!-- gitalk -->

    <div class="comment">
        <div id="gitalk-container"></div>
        <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
        <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
        <script>
                var gitalk = new Gitalk({
                    id: location.pathname,
                    clientID: "{{site.comments.clientID}}",
                    clientSecret: "{{ site.comments.clientSecret }}",
                    repo: "{{ site.comments.repo }}",
                    owner: "{{ site.comments.owner }}",
                    admin: "{{ site.comments.admin }}", 
                    labels: ['Gitalk'],
                })
                gitalk.render('gitalk-container')
        </script>
    </div>
```

æœ€åï¼Œåªéœ€è¦åœ¨ `_config.yml` ä¸­é…ç½®ä¸€ä¸‹ Github repository ç­‰ä¿¡æ¯å³å¯ï¼š

```yaml
# GitTalk comment settings
 gitalk:
 enable: true
 owner: "GitHub repo owner"
 repo: "GitHub repo"
 clientID: "GitHub Application Client ID"
 clientSecret: "GitHub Application Client Secret"
 admin: ["GitHub repo owner and collaborators, only these guys can initialize github issues"]
```

> *Noteï¼šclientId å’Œ clientSecret éœ€è¦åœ¨ Github ä¸ªäººè®¾ç½®çš„ Developer Settings ä¸­ OAuth Apps å¤„ç”³è¯·ã€‚*

### Giscus é…ç½®

Giscus çš„ä¼˜ç‚¹æœ‰å¾ˆå¤šï¼š

- [å¼€æº](https://github.com/giscus/giscus)ã€‚ğŸŒ
- æ— è·Ÿè¸ªï¼Œæ— å¹¿å‘Šï¼Œæ°¸ä¹…å…è´¹ã€‚ğŸ“¡ ğŸš«
- æ— éœ€æ•°æ®åº“ã€‚å…¨éƒ¨æ•°æ®å‡å‚¨å­˜åœ¨ GitHub Discussions ä¸­ã€‚
- æ”¯æŒ[è‡ªå®šä¹‰ä¸»é¢˜](https://github.com/giscus/giscus/blob/main/ADVANCED-USAGE.md#data-theme)ï¼ğŸŒ—
- æ”¯æŒ[å¤šç§è¯­è¨€](https://github.com/giscus/giscus/blob/main/CONTRIBUTING.md#adding-localizations)ã€‚ğŸŒ
- [é«˜åº¦å¯é…ç½®](https://github.com/giscus/giscus/blob/main/ADVANCED-USAGE.md)ã€‚ğŸ”§
- è‡ªåŠ¨ä» GitHub æ‹‰å–æ–°è¯„è®ºä¸ç¼–è¾‘ã€‚ğŸ”ƒ
- [å¯è‡ªå»ºæœåŠ¡](https://github.com/giscus/giscus/blob/main/SELF-HOSTING.md)ï¼ğŸ¤³

ç›¸å¯¹æ¥è¯´ï¼ŒGiscus çš„é…ç½®æ›´åŠ ç®€å•ï¼Œè¿›å…¥ [Giscus](https://giscus.app) ç«™ç‚¹æŒ‰éœ€å‹¾é€‰åå³å¯ç”Ÿæˆä¸ªäººé…ç½®ï¼Œé‡Œé¢ä¹Ÿæœ‰å…·ä½“æ­¥éª¤çš„æ“ä½œç»†èŠ‚ï¼Œæ¯”è¾ƒè¯¦ç»†ï¼Œè¿™é‡Œåªæä¸€ä¸‹ä»£ç ä¸­å¦‚ä½•é…ç½®ã€‚

ç¬¬ä¸€æ­¥ï¼Œåœ¨ `_includes/` ä¸‹åˆ›å»º `giscus_comment.html` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```html
<!-- https://giscus.app/ -->
 <script async src="https://giscus.app/client.js"
 	data-repo="{{ site.giscus.comments.repo }}"
 	data-repo-id="{{ site.giscus.comments.repo_id }}"
 	data-category="{{ site.giscus.comments.category }}"
 	data-category-id="{{ site.giscus.comments.category_id }}"
 	data-mapping="{{ site.giscus.comments.mapping }}"
 	data-reactions-enabled="1"
 	data-emit-metadata="0"
 	data-input-position="{{ site.giscus.comments.input_position }}"
 	data-theme="{{ site.giscus.comments.theme }}"
 	data-lang="{{ site.giscus.comments.lang }}"
     data-loading="lazy"
 	crossorigin="anonymous"
 	async>
 </script> 
```

ç¬¬äºŒæ­¥ï¼Œåœ¨ `_layouts/post.html` ä¸­è¯„è®ºåŒºå¤„é€šè¿‡ `include` å¼•å…¥ `giscus_comment.html` è¯„è®ºç»„ä»¶ã€‚ç”±äºé™æ€åšå®¢ç«™ç‚¹ä¼šæ¸²æŸ“ markdown ä¸­çš„ html ä»£ç ï¼Œè¿™é‡Œå°±ä¸æ”¾æºç äº†ï¼Œæœ‰ç–‘é—®çš„å¯ä»¥ç›´æ¥å»å‚è€ƒæœ¬äººçš„ [Commit](https://github.com/Moosphan/Moosphan.github.io/commit/60223a078444c6c339f04bc0793c251dd6c6f7e5) è®°å½•ã€‚

æœ€åä¸€æ­¥ï¼Œåªéœ€è¦åœ¨ `_config.yml` ä¸­åŠ å…¥ giscus ç«™ç‚¹ç”Ÿæˆçš„ä¸ªäºº repo ç›¸å…³é…ç½®ä¿¡æ¯å³å¯ï¼š

```yaml
# Giscus comment settings
 giscus.comments:
   repo: "The discussion repository"
   category: "Custom category on github discussion"
   repo_id: "Giscus generated repo id"
   category_id: "Giscus generated category id"
   mapping: 'pathname'
   input_position: 'top'
   theme: 'Giscus generated theme style'
   lang: "en"
```

çœ‹å®˜å¯æ ¹æ®è‡ªå·±å–œå¥½é€‰æ‹©å…¶ä¸€æ¥ä½¿ç”¨ï¼Œä»¥åæ•°æ®å®Œå…¨å­˜å‚¨åœ¨ Githubï¼Œå¯ä»¥è‡ªè¡Œè¿ç§»æˆ–è€…åˆ æ”¹ï¼Œè‡ªç”±åº¦ä¸è¨€è€Œå–»ã€‚

> *Noteï¼šæœ¬äººçš„ Jekyll ä¸»é¢˜æ˜¯ Huxï¼Œé­”æ”¹è¾ƒå¤šï¼Œç›¸å¯¹è€Œè¨€æ›´åŠ å°ä¼—ï¼Œå¦‚æœæ˜¯æ™®é€šä¸»é¢˜å¯ä»¥ä»–å¤„çœ‹çœ‹ï¼Œå¤–é¢é“ºå­è¿˜æ˜¯å¾ˆå¤šçš„ã€‚*